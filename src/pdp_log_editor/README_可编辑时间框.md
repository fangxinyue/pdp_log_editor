# PDP Log Editor - 可编辑时间框功能

## 功能描述
PDP Log Editor插件现在支持可编辑的时间输入框，用户可以通过多种方式输入和编辑时间戳。

## 特色功能

### 🎨 彩色可编辑时间框
- **绿色框** - start_time (浅绿色背景)
- **黄色框** - 控车时间 (浅黄色背景)  
- **橙色框** - 事件时间 (浅橙色背景)
- **红色框** - 场景结束时间 (浅红色背景)

### 📝 手动时间捕获
点击"手动获取时间"按钮会依次捕获当前bag时间：
1. 第1次点击 → 绿色框（start_time）
2. 第2次点击 → 黄色框（控车时间）
3. 第3次点击 → 橙色框（事件时间）
4. 第4次点击 → 红色框（场景结束时间）

### ✏️ 直接编辑功能
- 每个时间框都支持直接输入数字
- 支持小数点后2位精度
- 支持键盘输入和鼠标滚轮调整
- 实时同步到内部数据和其他组件

### 🔄 双向同步
- 手动捕获的时间 → 自动填入相应颜色的时间框
- 时间框编辑 → 实时更新内部数据结构
- 时间轴交互 → 同步更新时间框显示
- 3D视图点击 → 同步更新时间框

## 技术实现

### UI组件
```cpp
QDoubleSpinBox* start_time_spinbox_;     // 绿色 - 场景开始
QDoubleSpinBox* takeover_time_spinbox_;  // 黄色 - 控车时间  
QDoubleSpinBox* event_time_spinbox_;     // 橙色 - 事件时间
QDoubleSpinBox* end_time_spinbox_;       // 红色 - 场景结束
```

### 信号槽连接
```cpp
connect(start_time_spinbox_, QOverload<double>::of(&QDoubleSpinBox::valueChanged), 
        this, &PdpLogEditorPanel::onStartTimeChanged);
```

### 防循环更新机制
使用`blockSignals(true/false)`防止编程式更新触发信号循环。

## 使用方法

1. **启动插件**: 在RViz中加载PDP Log Editor面板
2. **选择时间模式**: 使用"时间同步"按钮选择Bag时间或ROS时间  
3. **捕获时间**: 
   - 点击"手动获取时间"按钮4次，依次填入4个彩色框
   - 或直接在任意时间框中输入/编辑数值
4. **完成标注**: 点击"发布"保存标注结果

## 颜色编码说明
- 🟢 **绿色** = start_time (第1次点击)
- 🟡 **黄色** = 控车时间 (第2次点击)  
- 🟠 **橙色** = 事件时间 (第3次点击)
- 🔴 **红色** = 场景结束时间 (第4次点击)

## 数据格式
- 时间值以秒为单位存储
- 支持负数和小数
- 范围: -999999.99 到 999999.99
- 精度: 小数点后2位

此功能让用户能够更直观、更灵活地编辑驾驶场景的时间标注！
