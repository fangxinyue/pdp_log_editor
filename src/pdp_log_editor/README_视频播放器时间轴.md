# PDP Log Editor - 视频播放器风格时间轴

## 🎬 **新增功能概述**
时间轴现在支持视频播放器风格的控制，与rosbag播放完全同步，支持播放/暂停/停止/速度控制。

## 🎮 **播放控制按钮**

### 播放/暂停按钮
- **播放状态**: 绿色 "播放" 按钮
- **暂停状态**: 橙色 "暂停" 按钮
- **功能**: 控制rosbag的播放和暂停

### 停止按钮
- **外观**: 红色 "停止" 按钮
- **功能**: 停止rosbag播放并重置到开始位置

### 播放速度控制
- **范围**: 0.1x - 5.0x
- **默认**: 1.0x (正常速度)
- **步长**: 0.1x
- **功能**: 实时调整rosbag播放速度

## 📊 **时间轴进度条**

### 可视化时间轴
- **时间刻度**: 显示0-10的时间刻度
- **颜色标记**: 
  - 🟢 绿色菱形 - 场景开始时间
  - 🟡 黄色菱形 - 接管时间
  - 🟠 橙色菱形 - 事件时间
  - 🔴 红色菱形 - 场景结束时间
- **当前位置**: 蓝色垂直线指示当前播放位置

### 进度条滑动器
- **外观**: 类似视频播放器的进度条
- **交互**: 拖拽可跳转到任意时间点
- **同步**: 与/clock话题实时同步

## 🔄 **同步机制**

### /clock话题订阅
```cpp
// 自动订阅/clock话题获取当前rosbag时间
clock_sub_ = nh.subscribe("/clock", 10, &PdpLogEditorPanel::clockCallback, this);
```

### 实时更新
- **更新频率**: 每100ms刷新一次显示
- **自动范围**: 时间轴范围根据播放时间自动调整
- **防循环**: 使用信号阻塞机制防止无限循环更新

## 🎛️ **控制命令**

### Rosbag控制话题
发布到 `/rosbag_control` 话题：
- `"play"` - 开始播放
- `"pause"` - 暂停播放  
- `"stop"` - 停止播放
- `"set_rate 1.5"` - 设置播放速度为1.5x
- `"seek 123.456"` - 跳转到指定时间戳

## 🚀 **使用方法**

### 基本播放控制
1. 点击 **"播放"** 开始播放rosbag
2. 点击 **"暂停"** 暂停播放
3. 点击 **"停止"** 停止并重置
4. 调整 **速度滑块** 改变播放速度

### 时间点跳转
1. **拖拽进度条** - 跳转到任意时间点
2. **点击时间轴** - 精确定位到特定时间
3. **拖拽时间标记** - 调整标注时间点

### 时间标注
1. 播放过程中点击 **"手动获取时间"** 捕获当前时间
2. 或直接在彩色时间框中编辑数值
3. 所有标注会在时间轴上实时显示

## 💡 **技术特点**

- **实时同步**: 与rosbag播放完全同步
- **双向控制**: 既能显示播放状态，也能控制播放
- **动态范围**: 时间轴范围自动适应播放内容
- **精确跳转**: 支持微秒级精度的时间跳转
- **多重输入**: 支持按钮、拖拽、数值输入等多种交互方式

现在您的时间轴就像专业的视频编辑软件一样强大和直观！🎉
